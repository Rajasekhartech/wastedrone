pc.script.createLoadingScreen((function(e){var n,t;n=["body {","    background-color: #283538;","}","","#application-splash-wrapper {","    position: absolute;","    top: 0;","    left: 0;","    height: 100%;","    width: 100%;","    background-color: #088A08;","}","","#application-splash {","    position: absolute;","    top: calc(50% - 28px);","    width: 264px;","    left: calc(50% - 132px);","}","","#application-splash img {","    position: absolute;","    margin: 20px auto 0 auto;","    width: 50%;","    left: 25%;","}","","#progress-bar-container {","    margin: 20px auto 0 auto;","    height: 20px;","    width: 100%;","    border: black;","    border-color: white;","    border-style: solid;","    border-width: 5px;","    box-shadow: 5px 5px;","    border-radius: 10px;","    background-color: #A9F5D0;","}","","#progress-bar {","    width: 0%;","    height: 100%;","    background-color: #088A08;","}","","@media (max-width: 480px) {","    #application-splash {","        width: 170px;","        left: calc(50% - 85px);","    }","}"].join("\n"),(t=document.createElement("style")).type="text/css",t.styleSheet?t.styleSheet.cssText=n:t.appendChild(document.createTextNode(n)),document.head.appendChild(t),function(){var e=document.createElement("div");e.id="application-splash-wrapper",document.body.appendChild(e);var n=document.createElement("div");n.id="application-splash",e.appendChild(n),n.style.display="none";var t=document.createElement("div");t.id="progress-bar-container",n.appendChild(t);var a=document.createElement("div");a.id="progress-bar",t.appendChild(a);var r=document.createElement("img");r.src="data:image/png;base64,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",n.appendChild(r),r.onload=function(){n.style.display="block"}}(),e.on("preload:end",(function(){e.off("preload:progress")})),e.on("preload:progress",(function(e){var n=document.getElementById("progress-bar");n&&(e=Math.min(1,Math.max(0,e)),n.style.width=100*e+"%")})),e.on("start",(function(){var e=document.getElementById("application-splash-wrapper");e.parentElement.removeChild(e)}))}));var PlayerController=pc.createScript("playerController");PlayerController.attributes.add("cameraEntity",{type:"entity",title:"Camera Entity"}),PlayerController.attributes.add("playerEntity",{type:"entity",title:"Player Entity"}),PlayerController.attributes.add("playerSpeed",{type:"number",default:0,title:"Player Speed"}),PlayerController.prototype.initialize=function(){this.groundShape=new pc.BoundingBox(new pc.Vec3(0,0,0),new pc.Vec3(20,.001,20)),this.direction=new pc.Vec3,this.distanceToTravel=0,this.targetPosition=new pc.Vec3,this.app.mouse.on(pc.EVENT_MOUSEDOWN,this.onMouseDown,this),this.app.touch&&this.app.touch.on(pc.EVENT_TOUCHSTART,this.onTouchStart,this)},PlayerController.newPosition=new pc.Vec3,PlayerController.prototype.update=function(t){if(this.direction.lengthSq()>0){var e=this.playerSpeed*t,i=PlayerController.newPosition;i.copy(this.direction).scale(e),i.add(this.playerEntity.getPosition()),this.playerEntity.setPosition(i),this.distanceToTravel-=e,this.distanceToTravel<=0&&(this.playerEntity.setPosition(this.targetPosition),this.direction.set(0,0,0))}},PlayerController.prototype.movePlayerTo=function(t){this.targetPosition.copy(t),this.targetPosition.y=this.playerEntity.getPosition().y,this.distanceTravelled=0,this.direction.sub2(this.targetPosition,this.playerEntity.getPosition()),this.distanceToTravel=this.direction.length(),this.distanceToTravel>0?(this.direction.normalize(),this.playerEntity.lookAt(this.targetPosition)):this.direction.set(0,0,0)},PlayerController.prototype.onMouseDown=function(t){t.button==pc.MOUSEBUTTON_LEFT&&this.doRayCast(t)},PlayerController.prototype.onTouchStart=function(t){1==t.touches.length&&(this.doRayCast(t.touches[0]),t.event.preventDefault())},PlayerController.ray=new pc.Ray,PlayerController.hitPosition=new pc.Vec3,PlayerController.prototype.doRayCast=function(t){var e=PlayerController.ray,i=PlayerController.hitPosition;this.cameraEntity.camera.screenToWorld(t.x,t.y,this.cameraEntity.camera.farClip,e.direction),e.origin.copy(this.cameraEntity.getPosition()),e.direction.sub(e.origin).normalize(),this.groundShape.intersectsRay(e,i)&&this.movePlayerTo(i)};var WasteDroneController=pc.createScript("wasteDroneController");WasteDroneController.attributes.add("Camera",{type:"entity"}),WasteDroneController.attributes.add("TargetDirection",{type:"entity"}),WasteDroneController.attributes.add("CleanerPosition",{type:"entity"}),WasteDroneController.attributes.add("IsCleanerOpen",{type:"boolean",default:!1}),WasteDroneController.attributes.add("IsMultiClick",{type:"boolean",default:!1}),WasteDroneController.prototype.initialize=function(){this.rayStart=new pc.Vec3,this.rayEnd=new pc.Vec3,this.app.mouse.on(pc.EVENT_MOUSEUP,this.onMouseUp,this),this.lastTouchPoint=new pc.Vec2,this.app.touch&&(this.app.touch.on(pc.EVENT_TOUCHSTART,this.onTouchStart,this),this.app.touch.on(pc.EVENT_TOUCHMOVE,this.onTouchMove,this),this.app.touch.on(pc.EVENT_TOUCHEND,this.onTouchEnd,this))},WasteDroneController.prototype.onTouchStart=function(t){t.touches[0];this.lastTouchPoint=t.touches[0]},WasteDroneController.prototype.onTouchMove=function(t){t.touches[0];this.lastTouchPoint=t.touches[0]},WasteDroneController.prototype.onTouchEnd=function(t){if(!globalVariables.IsGamePause&&!this.IsMultiClick){this.IsMultiClick=!0,setTimeout((()=>{this.IsMultiClick=!1}),600);var e=this.Camera.camera.farClip,a=this.Camera.camera.nearClip;this.Camera.camera.screenToWorld(this.lastTouchPoint.x,this.lastTouchPoint.y,a,this.rayStart),this.Camera.camera.screenToWorld(this.lastTouchPoint.x,this.lastTouchPoint.y,e,this.rayEnd);var i=this.app.systems.rigidbody.raycastFirst(this.rayStart,this.rayEnd);if(i&&(i.entity.tags.has("Water")||i.entity.tags.has("Waste")||i.entity.tags.has("ForClick")||i.entity.tags.has("Cleaner"))){var s=i.point;if(s.y=this.entity.getPosition().y,i.entity.tags.has("Cleaner")&&!this.IsCleanerOpen){this.IsCleanerOpen=!0;var o=this.CleanerPosition.getPosition();s.x=o.x,s.z=o.z}else if(i.entity.tags.has("Cleaner")&&this.IsCleanerOpen)return;this.TargetDirection.setPosition(this.entity.getPosition()),this.TargetDirection.lookAt(s);var n=this.TargetDirection.getLocalEulerAngles();this.entity.tween(this.entity.getLocalEulerAngles()).rotate({x:n.x,y:n.y,z:n.z},.5,pc.Linear).start(),s.y=this.entity.getLocalPosition().y;var r=new pc.Vec3;r.sub2(this.entity.getLocalPosition(),s);var l=r.length()/5;this.entity.tween(this.entity.getLocalPosition()).to({x:s.x,y:s.y,z:s.z},l,pc.Linear).start(),i.entity.tags.has("Cleaner")?(console.log("Open"),globalVariables.GameManager.script.gameManager.ShowCleanerOpen()):(i.entity.tags.has("Water")||i.entity.tags.has("Waste")||i.entity.tags.has("ForClick"))&&(this.IsCleanerOpen=!1,console.log("Close"),globalVariables.GameManager.script.gameManager.ShowCleanerClose())}}},WasteDroneController.prototype.onMouseUp=function(t){if(!globalVariables.IsGamePause&&!this.IsMultiClick){this.IsMultiClick=!0,setTimeout((()=>{this.IsMultiClick=!1}),600);var e=this.Camera.camera.farClip,a=this.Camera.camera.nearClip;this.Camera.camera.screenToWorld(t.x,t.y,a,this.rayStart),this.Camera.camera.screenToWorld(t.x,t.y,e,this.rayEnd);var i=this.app.systems.rigidbody.raycastFirst(this.rayStart,this.rayEnd);if(i&&(i.entity.tags.has("Water")||i.entity.tags.has("Waste")||i.entity.tags.has("ForClick")||i.entity.tags.has("Cleaner"))){var s=i.point;if(s.y=this.entity.getPosition().y,i.entity.tags.has("Cleaner")&&!this.IsCleanerOpen){this.IsCleanerOpen=!0;var o=this.CleanerPosition.getPosition();s.x=o.x,s.z=o.z}else if(i.entity.tags.has("Cleaner")&&this.IsCleanerOpen)return;this.TargetDirection.setPosition(this.entity.getPosition()),this.TargetDirection.lookAt(s);var n=this.TargetDirection.getLocalEulerAngles();this.entity.tween(this.entity.getLocalEulerAngles()).rotate({x:n.x,y:n.y,z:n.z},.5,pc.Linear).start(),s.y=this.entity.getLocalPosition().y;var r=new pc.Vec3;r.sub2(this.entity.getLocalPosition(),s);var l=r.length()/5;this.entity.tween(this.entity.getLocalPosition()).to({x:s.x,y:s.y,z:s.z},l,pc.Linear).start(),i.entity.tags.has("Cleaner")?(console.log("Open"),globalVariables.GameManager.script.gameManager.ShowCleanerOpen()):(i.entity.tags.has("Water")||i.entity.tags.has("Waste")||i.entity.tags.has("ForClick"))&&(this.IsCleanerOpen=!1,console.log("Close"),globalVariables.GameManager.script.gameManager.ShowCleanerClose())}}},WasteDroneController.prototype.update=function(t){};var Ray=pc.createScript("ray");Ray.attributes.add("Mentity",{type:"entity"}),Ray.prototype.initialize=function(){this.app.mouse.on("mousemove",this.onMouseMove,this),this.rayStart=new pc.Vec3,this.rayEnd=new pc.Vec3,this.green=new pc.Color(0,1,0),this.red=new pc.Color(1,0,0)},Ray.prototype.onMouseMove=function(t){var e=this.entity.camera.farClip,i=this.entity.camera.nearClip;this.entity.camera.screenToWorld(t.x,t.y,i,this.rayStart),this.entity.camera.screenToWorld(t.x,t.y,e,this.rayEnd);var r=this.app.systems.rigidbody.raycastFirst(this.rayStart,this.rayEnd);r?(this.Mentity.setPosition(r.point),this.entity.camera.clearColor=this.green):this.entity.camera.clearColor=this.red},Ray.prototype.update=function(t){};pc.extend(pc,function(){var TweenManager=function(t){this._app=t,this._tweens=[],this._add=[]};TweenManager.prototype={add:function(t){return this._add.push(t),t},update:function(t){for(var i=0,e=this._tweens.length;i<e;)this._tweens[i].update(t)?i++:(this._tweens.splice(i,1),e--);this._add.length&&(this._tweens=this._tweens.concat(this._add),this._add.length=0)}};var Tween=function(t,i,e){pc.events.attach(this),this.manager=i,e&&(this.entity=null),this.time=0,this.complete=!1,this.playing=!1,this.stopped=!0,this.pending=!1,this.target=t,this.duration=0,this._currentDelay=0,this.timeScale=1,this._reverse=!1,this._delay=0,this._yoyo=!1,this._count=0,this._numRepeats=0,this._repeatDelay=0,this._from=!1,this._slerp=!1,this._fromQuat=new pc.Quat,this._toQuat=new pc.Quat,this._quat=new pc.Quat,this.easing=pc.EASE_LINEAR,this._sv={},this._ev={}};Tween.prototype={to:function(t,i,e,s,n,r){return t instanceof pc.Vec3?this._properties={x:t.x,y:t.y,z:t.z}:t instanceof pc.Color?(this._properties={r:t.r,g:t.g,b:t.b},void 0!==t.a&&(this._properties.a=t.a)):this._properties=t,this.duration=i,e&&(this.easing=e),s&&this.delay(s),n&&this.repeat(n),r&&this.yoyo(r),this},from:function(t,i,e,s,n,r){return t instanceof pc.Vec3?this._properties={x:t.x,y:t.y,z:t.z}:t instanceof pc.Color?(this._properties={r:t.r,g:t.g,b:t.b},void 0!==t.a&&(this._properties.a=t.a)):this._properties=t,this.duration=i,e&&(this.easing=e),s&&this.delay(s),n&&this.repeat(n),r&&this.yoyo(r),this._from=!0,this},rotate:function(t,i,e,s,n,r){return t instanceof pc.Quat?this._properties={x:t.x,y:t.y,z:t.z,w:t.w}:t instanceof pc.Vec3?this._properties={x:t.x,y:t.y,z:t.z}:t instanceof pc.Color?(this._properties={r:t.r,g:t.g,b:t.b},void 0!==t.a&&(this._properties.a=t.a)):this._properties=t,this.duration=i,e&&(this.easing=e),s&&this.delay(s),n&&this.repeat(n),r&&this.yoyo(r),this._slerp=!0,this},start:function(){if(this.playing=!0,this.complete=!1,this.stopped=!1,this._count=0,this.pending=this._delay>0,this._reverse&&!this.pending?this.time=this.duration:this.time=0,this._from){for(var t in this._properties)this._sv[t]=this._properties[t],this._ev[t]=this.target[t];if(this._slerp){this._toQuat.setFromEulerAngles(this.target.x,this.target.y,this.target.z);var i=void 0!==this._properties.x?this._properties.x:this.target.x,e=void 0!==this._properties.y?this._properties.y:this.target.y,s=void 0!==this._properties.z?this._properties.z:this.target.z;this._fromQuat.setFromEulerAngles(i,e,s)}}else{for(var t in this._properties)this._sv[t]=this.target[t],this._ev[t]=this._properties[t];if(this._slerp){this._fromQuat.setFromEulerAngles(this.target.x,this.target.y,this.target.z);i=void 0!==this._properties.x?this._properties.x:this.target.x,e=void 0!==this._properties.y?this._properties.y:this.target.y,s=void 0!==this._properties.z?this._properties.z:this.target.z;this._toQuat.setFromEulerAngles(i,e,s)}}return this._currentDelay=this._delay,this.manager.add(this),this},pause:function(){this.playing=!1},resume:function(){this.playing=!0},stop:function(){this.playing=!1,this.stopped=!0},delay:function(t){return this._delay=t,this.pending=!0,this},repeat:function(t,i){return this._count=0,this._numRepeats=t,this._repeatDelay=i||0,this},loop:function(t){return t?(this._count=0,this._numRepeats=1/0):this._numRepeats=0,this},yoyo:function(t){return this._yoyo=t,this},reverse:function(){return this._reverse=!this._reverse,this},chain:function(){for(var t=arguments.length;t--;)t>0?arguments[t-1]._chained=arguments[t]:this._chained=arguments[t];return this},update:function(t){if(this.stopped)return!1;if(!this.playing)return!0;if(!this._reverse||this.pending?this.time+=t*this.timeScale:this.time-=t*this.timeScale,this.pending){if(!(this.time>this._currentDelay))return!0;this._reverse?this.time=this.duration-(this.time-this._currentDelay):this.time=this.time-this._currentDelay,this.pending=!1}var i=0;(!this._reverse&&this.time>this.duration||this._reverse&&this.time<0)&&(this._count++,this.complete=!0,this.playing=!1,this._reverse?(i=this.duration-this.time,this.time=0):(i=this.time-this.duration,this.time=this.duration));var e,s,n=this.time/this.duration,r=this.easing(n);for(var h in this._properties)e=this._sv[h],s=this._ev[h],this.target[h]=e+(s-e)*r;if(this._slerp&&this._quat.slerp(this._fromQuat,this._toQuat,r),this.entity&&(this.entity._dirtify(!0),this.element&&this.entity.element&&(this.entity.element[this.element]=this.target),this._slerp&&this.entity.setLocalRotation(this._quat)),this.fire("update",t),this.complete){var a=this._repeat(i);return a?this.fire("loop"):(this.fire("complete",i),this._chained&&this._chained.start()),a}return!0},_repeat:function(t){if(this._count<this._numRepeats){if(this._reverse?this.time=this.duration-t:this.time=t,this.complete=!1,this.playing=!0,this._currentDelay=this._repeatDelay,this.pending=!0,this._yoyo){for(var i in this._properties)tmp=this._sv[i],this._sv[i]=this._ev[i],this._ev[i]=tmp;this._slerp&&(this._quat.copy(this._fromQuat),this._fromQuat.copy(this._toQuat),this._toQuat.copy(this._quat))}return!0}return!1}};var BounceIn=function(t){return 1-BounceOut(1-t)},BounceOut=function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375};return{TweenManager:TweenManager,Tween:Tween,Linear:function(t){return t},QuadraticIn:function(t){return t*t},QuadraticOut:function(t){return t*(2-t)},QuadraticInOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)},CubicIn:function(t){return t*t*t},CubicOut:function(t){return--t*t*t+1},CubicInOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},QuarticIn:function(t){return t*t*t*t},QuarticOut:function(t){return 1- --t*t*t*t},QuarticInOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},QuinticIn:function(t){return t*t*t*t*t},QuinticOut:function(t){return--t*t*t*t*t+1},QuinticInOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},SineIn:function(t){return 0===t?0:1===t?1:1-Math.cos(t*Math.PI/2)},SineOut:function(t){return 0===t?0:1===t?1:Math.sin(t*Math.PI/2)},SineInOut:function(t){return 0===t?0:1===t?1:.5*(1-Math.cos(Math.PI*t))},ExponentialIn:function(t){return 0===t?0:Math.pow(1024,t-1)},ExponentialOut:function(t){return 1===t?1:1-Math.pow(2,-10*t)},ExponentialInOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))},CircularIn:function(t){return 1-Math.sqrt(1-t*t)},CircularOut:function(t){return Math.sqrt(1- --t*t)},CircularInOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},BackIn:function(t){var i=1.70158;return t*t*((i+1)*t-i)},BackOut:function(t){var i=1.70158;return--t*t*((i+1)*t+i)+1},BackInOut:function(t){var i=2.5949095;return(t*=2)<1?t*t*((i+1)*t-i)*.5:.5*((t-=2)*t*((i+1)*t+i)+2)},BounceIn:BounceIn,BounceOut:BounceOut,BounceInOut:function(t){return t<.5?.5*BounceIn(2*t):.5*BounceOut(2*t-1)+.5},ElasticIn:function(t){var i,e=.1;return 0===t?0:1===t?1:(!e||e<1?(e=1,i=.1):i=.4*Math.asin(1/e)/(2*Math.PI),-e*Math.pow(2,10*(t-=1))*Math.sin((t-i)*(2*Math.PI)/.4))},ElasticOut:function(t){var i,e=.1;return 0===t?0:1===t?1:(!e||e<1?(e=1,i=.1):i=.4*Math.asin(1/e)/(2*Math.PI),e*Math.pow(2,-10*t)*Math.sin((t-i)*(2*Math.PI)/.4)+1)},ElasticInOut:function(t){var i,e=.1,s=.4;return 0===t?0:1===t?1:(!e||e<1?(e=1,i=.1):i=s*Math.asin(1/e)/(2*Math.PI),(t*=2)<1?e*Math.pow(2,10*(t-=1))*Math.sin((t-i)*(2*Math.PI)/s)*-.5:e*Math.pow(2,-10*(t-=1))*Math.sin((t-i)*(2*Math.PI)/s)*.5+1)}}}()),function(){var t=pc.Application.getApplication();t&&(t._tweenManager=new pc.TweenManager(t),t.on("update",(function(i){t._tweenManager.update(i)})),pc.Application.prototype.tween=function(t){return new pc.Tween(t,this._tweenManager)},pc.Entity.prototype.tween=function(t,i){var e=this._app.tween(t);return e.entity=this,this.on("destroy",(function(){e.stop()})),i&&i.element&&(e.element=element),e})}();var WasteHandler=pc.createScript("wasteHandler");WasteHandler.attributes.add("ColliderEntity",{type:"entity"}),WasteHandler.attributes.add("IsBounce",{type:"boolean",default:!1}),WasteHandler.prototype.initialize=function(){this.ColliderEntity.collision.on("triggerenter",this.onTriggerEnter,this),this.initialPosition=this.entity.getPosition().clone(),this.initialRotation=this.entity.getEulerAngles().clone(),this.time=2*Math.random()*Math.PI},WasteHandler.prototype.onTriggerEnter=function(t){if(t.tags.has("WasteDrone")){var e=globalVariables.GameManager.script.gameManager;if(!e.IsCapacityFull)this.entity.tween(this.entity.getLocalScale()).to({x:0,y:0,z:0},.5,pc.SineOut).start(),e.AddStar(2),globalVariables.IsGamePause||e.WastesSpawner.script.wasteSpawnerHandler.SpawnSingleWaste(),setTimeout((()=>{this.entity.destroy()}),1e3)}else if(t.tags.has("BoostArea")){var i=globalVariables.GameManager.script.gameManager;if(!i.IsCapacityFull){this.entity.tween(this.entity.getLocalScale()).to({x:0,y:0,z:0},.2,pc.SineOut).start(),i.AddStar(2),globalVariables.IsGamePause||i.WastesSpawner.script.wasteSpawnerHandler.SpawnSingleWaste();var a=t.parent.getLocalPosition();this.entity.tween(this.entity.getLocalPosition()).to({x:a.x,y:a.y,z:a.z},.3,pc.Linear).start(),setTimeout((()=>{this.entity.destroy()}),1e3)}}},WasteHandler.prototype.StartVisible=function(){var t=this.entity.getLocalPosition();t.y=0,this.entity.tween(this.entity.getLocalPosition()).to({x:t.x,y:t.y,z:t.z},.5,pc.BackInOut).start();var e=this.entity.getLocalScale();e.x=0,e.y=0,e.z=0,this.entity.setLocalScale(e),this.entity.tween(this.entity.getLocalScale()).to({x:1,y:1,z:1},.5,pc.SineOut).start(),setTimeout((()=>{this.initialPosition=this.entity.getPosition().clone(),this.initialRotation=this.entity.getEulerAngles().clone(),this.time=2*Math.random()*Math.PI,this.IsBounce=!0}),500)},WasteHandler.prototype.update=function(t){if(this.IsBounce){this.time+=.1;var e=this.entity.getPosition().clone();e.y=this.initialPosition.y+.02*Math.cos(this.time),this.entity.setPosition(e.x,e.y,e.z);var i=this.entity.getEulerAngles().clone();i.x=this.initialRotation.x+1*Math.cos(.25*this.time),i.z=this.initialRotation.z+2*Math.sin(.25*this.time),this.entity.setLocalEulerAngles(i.x,i.y,i.z)}};var LivingCreatureHandler=pc.createScript("livingCreatureHandler");LivingCreatureHandler.attributes.add("ColliderEntity",{type:"entity"}),LivingCreatureHandler.attributes.add("AnimEntity",{type:"entity"}),LivingCreatureHandler.attributes.add("TargetPoint",{type:"vec3"}),LivingCreatureHandler.prototype.initialize=function(){this.IsMoving=!1,this.SpeedIncrement=0,this.Tween=null,this.lerpedPosition=new pc.Vec3,this.ColliderEntity.collision.on("triggerenter",this.onTriggerEnter,this)},LivingCreatureHandler.prototype.onTriggerEnter=function(t){var e=globalVariables.GameManager.script.gameManager;t.tags.has("WasteDrone")?(this.entity.tween(this.entity.getLocalScale()).to({x:0,y:0,z:0},1,pc.SineOut).start(),e.RemoveStar(1),globalVariables.IsGamePause||e.CreatureSpawner.script.livingCreatureSpawner.SpawnSingleCreature(),setTimeout((()=>{this.entity.destroy()}),1e3)):t.tags.has("Waste")&&(this.Tween.stop(),this.AnimEntity.anim.setBoolean("Eat",!0),globalVariables.IsGamePause||e.CreatureSpawner.script.livingCreatureSpawner.SpawnSingleCreature(),setTimeout((()=>{this.entity.tween(this.entity.getLocalScale()).to({x:0,y:0,z:0},1,pc.SineOut).start(),e.RemoveStar(1)}),2e3))},LivingCreatureHandler.prototype.StartMoving=function(t){this.TargetPoint=t,this.entity.lookAt(this.TargetPoint);var e=pc.math.random(15,30);this.Tween=this.entity.tween(this.entity.getLocalPosition()).to({x:t.x,y:t.y,z:t.z},e,pc.Linear),this.Tween.start(),setTimeout((()=>{this.entity.destroy()}),1e3*e)},LivingCreatureHandler.prototype.update=function(t){};var BoosterHandler=pc.createScript("boosterHandler");BoosterHandler.attributes.add("ColliderEntity",{type:"entity"}),BoosterHandler.prototype.initialize=function(){this.ColliderEntity.collision.on("triggerenter",this.onTriggerEnter,this)},BoosterHandler.prototype.onTriggerEnter=function(t){t.tags.has("WasteDrone")&&(globalVariables.GameManager.script.gameManager.ActivateBooster(),this.entity.tween(this.entity.getLocalScale()).to({x:0,y:0,z:0},1,pc.SineOut).start(),setTimeout((()=>{this.entity.destroy()}),1e3))},BoosterHandler.prototype.StartVisible=function(){var t=this.entity.getLocalPosition();t.y=0;var e=pc.math.random(.1,2);this.entity.tween(this.entity.getLocalPosition()).to({x:t.x,y:t.y,z:t.z},e,pc.BackInOut).start()};var GameManager=pc.createScript("gameManager");GameManager.attributes.add("UiManager",{type:"entity"}),GameManager.attributes.add("GameDurationInSec",{type:"number"}),GameManager.attributes.add("StarCount",{type:"number"}),GameManager.attributes.add("IsGameStart",{type:"boolean",default:!1}),GameManager.attributes.add("BoosterArea",{type:"entity"}),GameManager.attributes.add("BoosterVisibleTime",{type:"number",default:3e3}),GameManager.attributes.add("Wastes",{type:"entity",array:!0}),GameManager.attributes.add("WastesSpawner",{type:"entity"}),GameManager.attributes.add("LivingCreatures",{type:"entity",array:!0}),GameManager.attributes.add("CreatureSpawner",{type:"entity"}),GameManager.attributes.add("CapacityBar",{type:"entity"}),GameManager.attributes.add("CapacityFullIcon",{type:"entity"}),GameManager.attributes.add("MaxDroneCapacity",{type:"number",default:0}),GameManager.attributes.add("DroneCapacity",{type:"number",default:0}),GameManager.attributes.add("IsCapacityFull",{type:"boolean",default:!1}),GameManager.attributes.add("Booster",{type:"entity"}),GameManager.attributes.add("BoosterSpawner",{type:"entity"}),GameManager.attributes.add("CleanerAnim",{type:"entity"}),GameManager.prototype.initialize=function(){this.UiManager.script.uimanager.UpdateTimer(this.GameDurationInSec),setTimeout((()=>{globalVariables.IsGamePause=!1,this.IsGameStart=!0,this.CreateCreatureSet(1,3),this.CreateWasteSet(),this.CreateBooster()}),1e3)},GameManager.prototype.update=function(a){this.StartEndTimer&&(this.TotalTime-=60*a,this.UiManager.script.uimanager.UpdateTimer(this.TotalTime),this.TotalTime<0&&(this.UiManager.script.uimanager.UpdateTimer(0),this.StartEndTimer=!1)),globalVariables.IsGamePause||this.IsGameStart&&(this.UiManager.script.uimanager.UpdateTimer(this.GameDurationInSec),this.GameDurationInSec-=a,this.GameDurationInSec<0&&(console.log("Timeout"),this.GameEnd(),this.IsGameStart=!1))},GameManager.prototype.CreateCreatureSet=function(a,e){this.CreatureSpawner.script.livingCreatureSpawner.GenerateCreature(a,e);var t=pc.math.random(20,35);setInterval((()=>{globalVariables.IsGamePause||this.CreatureSpawner.script.livingCreatureSpawner.GenerateCreature(0,2)}),1e3*t)},GameManager.prototype.CreateWasteSet=function(a,e){this.WastesSpawner.script.wasteSpawnerHandler.GenerateWastes(3,6);var t=pc.math.random(18,35);setInterval((()=>{globalVariables.IsGamePause||this.WastesSpawner.script.wasteSpawnerHandler.GenerateWastes(0,2)}),1e3*t)},GameManager.prototype.CreateBooster=function(){var a=pc.math.random(25,50);setInterval((()=>{globalVariables.IsGamePause||this.BoosterSpawner.script.boosterSpawner.SpawnBooster()}),1e3*a)},GameManager.prototype.ActivateBooster=function(){this.BoosterArea.enabled=!0,setTimeout((()=>{this.BoosterArea.enabled=!1}),this.BoosterVisibleTime)},GameManager.prototype.AddStar=function(a){globalVariables.IsGamePause||(this.StarCount+=a,this.AddDroneCapcity(),this.UiManager.script.uimanager.UpdateScore(this.StarCount),this.UiManager.script.uimanager.PlayStarCollectAnimation())},GameManager.prototype.AddDroneCapcity=function(){this.DroneCapacity+=1;var a=this.CapacityBar.getLocalScale();if(this.DroneCapacity>=this.MaxDroneCapacity)return this.IsCapacityFull=!0,this.CapacityFullIcon.enabled=!0,a.x=1,void this.CapacityBar.setLocalScale(a);var e=this.DroneCapacity/this.MaxDroneCapacity;a.x=e,this.CapacityBar.setLocalScale(a)},GameManager.prototype.EmptyDroneCapcity=function(a){this.IsCapacityFull=!1,this.CapacityFullIcon.enabled=!1,this.DroneCapacity=0,this.CapacityBar.tween(this.CapacityBar.getLocalScale()).to({x:0,y:1,z:1},.5,pc.Linear).start()},GameManager.prototype.RemoveStar=function(a){globalVariables.IsGamePause||(this.StarCount-=a,this.StarCount<0&&(this.StarCount=0),this.UiManager.script.uimanager.UpdateScore(this.StarCount),this.UiManager.script.uimanager.PlayStarLoseAnimation())},GameManager.prototype.ShowCleanerOpen=function(){this.CleanerAnim.anim.setBoolean("Open",!0)},GameManager.prototype.ShowCleanerClose=function(){this.CleanerAnim.anim.setBoolean("Open",!1)},GameManager.prototype.TimeOut=function(){globalVariables.IsGamePause=!0,globalVariables.IsControllBlocked=!0,this.UiManager.script.uimanager.ShowTimeOut(this.StarCount)},GameManager.prototype.GameEnd=function(){globalVariables.IsGamePause=!0,globalVariables.IsControllBlocked=!0,this.UiManager.script.uimanager.ShowGameEnd(this.StarCount)};var Uimanager=pc.createScript("uimanager");Uimanager.attributes.add("TimerTxt",{type:"entity"}),Uimanager.attributes.add("ScoreTxt",{type:"entity"}),Uimanager.attributes.add("StarCollectAnim",{type:"entity"}),Uimanager.attributes.add("StarLoseAnim",{type:"entity"}),Uimanager.attributes.add("PauseBtnEntity",{type:"entity"}),Uimanager.attributes.add("PauseMenuEntity",{type:"entity"}),Uimanager.attributes.add("ResumeBtnEntity",{type:"entity"}),Uimanager.attributes.add("RestartBtnEntity",{type:"entity"}),Uimanager.attributes.add("SoundMuteBtn",{type:"entity"}),Uimanager.attributes.add("SoundUnMuteBtn",{type:"entity"}),Uimanager.attributes.add("GameEndEntity",{type:"entity"}),Uimanager.attributes.add("GameEndRemainingTimeTxt",{type:"entity"}),Uimanager.attributes.add("GameEndStarCountTxt",{type:"entity"}),Uimanager.attributes.add("GameEndRestartEntity",{type:"entity"}),Uimanager.attributes.add("GameEndContinueBtnEntity",{type:"entity"}),Uimanager.attributes.add("TimeOutEntity",{type:"entity"}),Uimanager.attributes.add("TimeOutStarCountTxt",{type:"entity"}),Uimanager.attributes.add("TimeOutRestartEntity",{type:"entity"}),Uimanager.attributes.add("TimeOutContinueBtnEntity",{type:"entity"}),Uimanager.prototype.initialize=function(){this.PauseBtnEntity.button.on("mousedown",this.OnClickPlause,this),this.ResumeBtnEntity.button.on("mousedown",this.OnClickResume,this),this.RestartBtnEntity.button.on("mousedown",this.OnClickRestart,this),this.SoundMuteBtn.button.on("mousedown",this.OnClickMute,this),this.SoundUnMuteBtn.button.on("mousedown",this.OnClickUnMute,this),this.GameEndRestartEntity.button.on("mousedown",this.OnClickRestart,this),this.GameEndContinueBtnEntity.button.on("mousedown",this.OnClickContinue,this),this.TimeOutRestartEntity.button.on("mousedown",this.OnClickRestart,this),this.TimeOutContinueBtnEntity.button.on("mousedown",this.OnClickContinue,this),this.PauseBtnEntity.button.on(pc.EVENT_TOUCHSTART,this.OnClickPlause,this),this.ResumeBtnEntity.button.on(pc.EVENT_TOUCHSTART,this.OnClickResume,this),this.RestartBtnEntity.button.on(pc.EVENT_TOUCHSTART,this.OnClickRestart,this),this.SoundMuteBtn.button.on(pc.EVENT_TOUCHSTART,this.OnClickMute,this),this.SoundUnMuteBtn.button.on(pc.EVENT_TOUCHSTART,this.OnClickUnMute,this),this.GameEndRestartEntity.button.on(pc.EVENT_TOUCHSTART,this.OnClickRestart,this),this.GameEndContinueBtnEntity.button.on(pc.EVENT_TOUCHSTART,this.OnClickContinue,this),this.TimeOutRestartEntity.button.on(pc.EVENT_TOUCHSTART,this.OnClickRestart,this),this.TimeOutContinueBtnEntity.button.on(pc.EVENT_TOUCHSTART,this.OnClickContinue,this),this.StartCoinAnim=!1,this.CoinsCount=0,this.CoinAnimCount=0},Uimanager.prototype.update=function(t){this.StartCoinAnim&&(this.CoinAnimCount+=60*t,this.GameEndStarCountTxt.element.text=Math.round(this.CoinAnimCount),this.CoinsCount<this.CoinAnimCount&&(this.GameEndStarCountTxt.element.text=Math.round(this.CoinAnimCount),this.StartCoinAnim=!1))},Uimanager.prototype.UpdateTimer=function(t){Math.floor(t/3600);var n=Math.floor(t%3600/60),e=Math.round(t%60);this.TimerTxt.element.text=e>9?"0"+n+":"+e:"0"+n+":0"+e},Uimanager.prototype.UpdateScore=function(t){this.ScoreTxt.element.text=t},Uimanager.prototype.PlayStarCollectAnimation=function(){this.StarCollectAnim.enabled=!0,setTimeout((()=>{this.StarCollectAnim.enabled=!1}),800)},Uimanager.prototype.PlayStarLoseAnimation=function(){this.StarLoseAnim.enabled=!0,setTimeout((()=>{this.StarLoseAnim.enabled=!1}),800)},Uimanager.prototype.OnClickPlause=function(){globalVariables.IsGamePause||(globalVariables.IsGamePause=!0,this.PauseMenuEntity.enabled=!0,this.app.timeScale=0)},Uimanager.prototype.OnClickResume=function(){this.app.timeScale=1,this.PauseMenuEntity.enabled=!1,setTimeout((()=>{globalVariables.IsGamePause=!1}),500)},Uimanager.prototype.OnClickMute=function(){this.app.systems.sound.volume=0,this.IsMuted=!1,this.SoundUnMuteBtn.enabled=!0,this.SoundMuteBtn.enabled=!1},Uimanager.prototype.OnClickUnMute=function(){this.app.systems.sound.volume=1,this.IsMuted=!0,this.SoundUnMuteBtn.enabled=!1,this.SoundMuteBtn.enabled=!0},Uimanager.prototype.ShowTimeOut=function(t){this.TimeOutStarCountTxt.element.text=t,this.TimeOutEntity.enabled=!0},Uimanager.prototype.ShowGameEnd=function(t){this.GameEndStarCountTxt.element.text=t,this.StartCoinAnim=!0,this.GameEndEntity.enabled=!0},Uimanager.prototype.OnClickContinue=function(t){},Uimanager.prototype.OnClickRestart=function(){this.app.timeScale=1,window.location.reload()};var SoundManager=pc.createScript("soundManager");SoundManager.prototype.initialize=function(){};var GlobalVariables=pc.createScript("globalVariables");GlobalVariables.attributes.add("IsGamePause",{type:"boolean",default:!1}),GlobalVariables.attributes.add("IsControllBlocked",{type:"boolean",default:!1}),GlobalVariables.attributes.add("GameManager",{type:"entity"}),GlobalVariables.attributes.add("SoundManager",{type:"entity"}),GlobalVariables.attributes.add("UIManager",{type:"entity"}),GlobalVariables.prototype.initialize=function(){window.globalVariables=this};var AnimateSprite=pc.createScript("animateSprite");AnimateSprite.attributes.add("startFrame",{type:"number",default:0,description:"Frame to start animation from"}),AnimateSprite.attributes.add("numFrames",{type:"number",default:1,description:"Number of frames to play before looping"}),AnimateSprite.attributes.add("frameRate",{type:"number",default:1,description:"Playback frames per second"}),AnimateSprite.prototype.initialize=function(){this.timer=1/this.frameRate,this.frame=this.startFrame},AnimateSprite.prototype.update=function(t){this.timer-=t,this.timer<0&&(this.frame++,this.frame>=this.numFrames+this.startFrame&&(this.frame=this.startFrame),this.entity.element.spriteFrame=this.frame,this.timer=1/this.frameRate)};var LivingCreatureSpawner=pc.createScript("livingCreatureSpawner");LivingCreatureSpawner.attributes.add("StartPoint",{type:"vec3"}),LivingCreatureSpawner.attributes.add("EndPoint",{type:"vec3"}),LivingCreatureSpawner.prototype.initialize=function(){},LivingCreatureSpawner.prototype.GenerateCreature=function(t,i){for(var n=pc.math.random(t,i),r=0;r<n;r++)this.SpawnLivingCreatures()},LivingCreatureSpawner.prototype.SpawnSingleCreature=function(){var t=pc.math.random(1,5);setTimeout((()=>{this.SpawnLivingCreatures()}),1e3*t)},LivingCreatureSpawner.prototype.SpawnLivingCreatures=function(){var t=Math.floor(6*Math.random()),i=0,n=0,r=0,a=0;0===t?(i=-11,n=pc.math.random(-5,8),this.StartPoint.x=i,this.StartPoint.z=n,r=pc.math.random(-8,9),a=11,this.EndPoint.x=r,this.EndPoint.z=a,this.CreateLivingCreatures(this.StartPoint,this.EndPoint)):1===t?(i=-11,n=pc.math.random(-5,10),this.StartPoint.x=i,this.StartPoint.z=n,r=11,a=pc.math.random(-5,10),this.EndPoint.x=r,this.EndPoint.z=a,this.CreateLivingCreatures(this.StartPoint,this.EndPoint)):2===t?(i=pc.math.random(-7,9),n=11,this.StartPoint.x=i,this.StartPoint.z=n,r=-11,a=pc.math.random(-5,8),this.EndPoint.x=r,this.EndPoint.z=a,this.CreateLivingCreatures(this.StartPoint,this.EndPoint)):3===t?(i=pc.math.random(-9,7),n=11,this.StartPoint.x=i,this.StartPoint.z=n,r=11,a=pc.math.random(-5,8),this.EndPoint.x=r,this.EndPoint.z=a,this.CreateLivingCreatures(this.StartPoint,this.EndPoint)):4===t?(i=11,n=pc.math.random(-5,7),this.StartPoint.x=i,this.StartPoint.z=n,r=pc.math.random(-9,8),a=11,this.EndPoint.x=r,this.EndPoint.z=a,this.CreateLivingCreatures(this.StartPoint,this.EndPoint)):5===t&&(i=11,n=pc.math.random(-5,9),this.StartPoint.x=i,this.StartPoint.z=n,r=-11,a=pc.math.random(-5,9),this.EndPoint.x=r,this.EndPoint.z=a,this.CreateLivingCreatures(this.StartPoint,this.EndPoint))},LivingCreatureSpawner.prototype.CreateLivingCreatures=function(t,i){var n=globalVariables.GameManager.script.gameManager,r=Math.floor(Math.random()*n.LivingCreatures.length),a=n.LivingCreatures[r].clone();a.enabled=!0,a.setPosition(t),this.entity.parent.addChild(a),a.script.livingCreatureHandler.StartMoving(i)};var Water=pc.createScript("water");Water.attributes.add("vs",{type:"asset",assetType:"shader",title:"Vertex Shader"}),Water.attributes.add("fs",{type:"asset",assetType:"shader",title:"Fragment Shader"}),Water.attributes.add("surfaceTexture",{type:"asset",assetType:"texture",title:"Surface Texture"}),Water.prototype.initialize=function(){if(this.time=0,this.GeneratePlaneMesh(),this.savedVS=this.vs.resource,this.savedFS=this.fs.resource,this.savedFS!=this.fs.resource||this.savedVS!=this.vs.resource){var e=this.CreateWaterMaterial();this.entity.model.model.meshInstances[0].material=e,this.savedVS=this.vs.resource,this.savedFS=this.fs.resource}},Water.prototype.update=function(e){this.time+=.1,this.material.setParameter("uTime",this.time)},Water.prototype.swap=function(e){this.time=e.time},Water.prototype.GeneratePlaneMesh=function(e){void 0===e&&(e={subdivisions:100,width:100,height:100});var s,t,i,a=[],r=[],h=[];for(s=0;s<=e.subdivisions;s++)for(t=0;t<=e.subdivisions;t++){var o=new pc.Vec3(t*e.width/e.subdivisions-e.width/2,0,(e.subdivisions-s)*e.height/e.subdivisions-e.height/2);a.push(o.x,o.y,o.z),r.push(t/e.subdivisions,1-s/e.subdivisions)}for(s=0;s<e.subdivisions;s++)for(t=0;t<e.subdivisions;t++)h.push(t+s*(e.subdivisions+1)),h.push(t+1+s*(e.subdivisions+1)),h.push(t+1+(s+1)*(e.subdivisions+1)),h.push(t+s*(e.subdivisions+1)),h.push(t+1+(s+1)*(e.subdivisions+1)),h.push(t+(s+1)*(e.subdivisions+1));i=pc.calculateNormals(a,h);var n=new pc.GraphNode,u=this.CreateWaterMaterial(),d=pc.createMesh(this.app.graphicsDevice,a,{normals:i,uvs:r,indices:h}),p=new pc.MeshInstance(n,d,u),c=new pc.Model;c.graph=n,c.meshInstances.push(p),this.entity.addComponent("model"),this.entity.model.model=c,this.entity.model.castShadows=!1},Water.prototype.CreateWaterMaterial=function(){var e=new pc.Material;e.blendType=pc.BLEND_NORMAL,e.name="DynamicWater_Material";var s=this.app.graphicsDevice,t="precision "+s.precision+" float;\n";t+=this.fs.resource;var i=this.vs.resource,a={attributes:{aPosition:pc.gfx.SEMANTIC_POSITION,aUv0:pc.SEMANTIC_TEXCOORD0},vshader:i,fshader:t};return e.setParameter("uSurfaceTexture",this.surfaceTexture.resource),this.shader=new pc.Shader(s,a),e.setParameter("uTime",this.time),this.material=e,e.setShader(this.shader),e};var WasteSpawnerHandler=pc.createScript("wasteSpawnerHandler");WasteSpawnerHandler.attributes.add("StartPoint",{type:"vec3"}),WasteSpawnerHandler.prototype.initialize=function(){},WasteSpawnerHandler.prototype.GenerateWastes=function(a,t){for(var e=pc.math.random(a,t),n=0;n<e;n++){var r=pc.math.random(1,5);setTimeout((()=>{this.SpawnWaste()}),1e3*r)}},WasteSpawnerHandler.prototype.SpawnSingleWaste=function(){var a=pc.math.random(1,5);setTimeout((()=>{this.SpawnWaste()}),1e3*a)},WasteSpawnerHandler.prototype.SpawnWaste=function(){this.StartPoint.x=pc.math.random(-8,8),this.StartPoint.z=pc.math.random(-4,8);var a=globalVariables.GameManager.script.gameManager,t=Math.floor(Math.random()*a.Wastes.length),e=a.Wastes[t].clone();e.enabled=!0,e.setPosition(this.StartPoint),this.entity.parent.addChild(e);var n=e.getLocalEulerAngles();n.y=pc.math.random(0,360),e.setLocalEulerAngles(n),e.script.wasteHandler.StartVisible()};var ScrollingTexture=pc.createScript("scrollingTexture");ScrollingTexture.attributes.add("materialAsset",{type:"asset"}),ScrollingTexture.attributes.add("speed",{type:"vec2"}),ScrollingTexture.tmp=new pc.Vec2,ScrollingTexture.prototype.initialize=function(){this.materialAsset&&(this.material=this.materialAsset.resource)},ScrollingTexture.prototype.update=function(e){var t=ScrollingTexture.tmp;t.set(this.speed.x,this.speed.y),t.scale(e),this.material.diffuseMapOffset=this.material.diffuseMapOffset.add(t),this.material.normalMapOffset.add(t),this.material.opacityMapOffset.add(t),this.material.emissiveMapOffset.add(t),this.material.update()};var FollowWorldTarget=pc.createScript("followWorldTarget");FollowWorldTarget.attributes.add("target",{type:"entity"}),FollowWorldTarget.attributes.add("camera",{type:"entity"}),FollowWorldTarget.prototype.postUpdate=function(e){var t=this.target.getPosition(),a=new pc.Vec3;if(this.camera.camera.worldToScreen(t,a),a.z>0){this.entity.element.enabled=!0;var i=this.app.graphicsDevice.maxPixelRatio;a.x*=i,a.y*=i;var r=this.entity.element.screen.screen.scale,o=this.app.graphicsDevice;this.entity.setLocalPosition(a.x/r,(o.height-a.y)/r,0)}else this.entity.element.enabled=!1};var Buoyancy=pc.createScript("buoyancy");Buoyancy.prototype.initialize=function(){this.initialPosition=this.entity.getPosition().clone(),this.initialRotation=this.entity.getEulerAngles().clone(),this.time=2*Math.random()*Math.PI},Buoyancy.prototype.update=function(t){this.time+=.1;var i=this.entity.getPosition().clone();i.y=this.initialPosition.y+.02*Math.cos(this.time),this.entity.setPosition(i.x,i.y,i.z);var n=this.entity.getEulerAngles().clone();n.x=this.initialRotation.x+1*Math.cos(.25*this.time),n.z=this.initialRotation.z+2*Math.sin(.25*this.time),this.entity.setLocalEulerAngles(n.x,n.y,n.z)};var CleanerHandler=pc.createScript("cleanerHandler");CleanerHandler.attributes.add("ColliderEntity",{type:"entity"}),CleanerHandler.prototype.initialize=function(){this.ColliderEntity.collision.on("triggerenter",this.onTriggerEnter,this)},CleanerHandler.prototype.onTriggerEnter=function(e){e.tags.has("WasteDrone")&&(console.log("Cleaner"),globalVariables.GameManager.script.gameManager.EmptyDroneCapcity())};var BoosterSpawner=pc.createScript("boosterSpawner");BoosterSpawner.attributes.add("StartPoint",{type:"vec3"}),BoosterSpawner.prototype.initialize=function(){},BoosterSpawner.prototype.SpawnBooster=function(){this.StartPoint.x=pc.math.random(-8,8),this.StartPoint.z=pc.math.random(-4,8);var t=globalVariables.GameManager.script.gameManager.Booster.clone();t.enabled=!0,t.setPosition(this.StartPoint),this.entity.parent.addChild(t),t.script.boosterHandler.StartVisible()};var CapacityBarHandler=pc.createScript("capacityBarHandler");CapacityBarHandler.attributes.add("FollowEntity",{type:"entity"}),CapacityBarHandler.prototype.initialize=function(){this.FolllowPositionY=this.entity.getLocalPosition().y},CapacityBarHandler.prototype.update=function(t){this.entity.setLocalPosition(this.FollowEntity.getLocalPosition()),this.entity.getLocalPosition().y=this.FolllowPositionY};var WarningHandler=pc.createScript("warningHandler");WarningHandler.prototype.initialize=function(){this.entity.tween(this.entity.getLocalScale()).to(new pc.Vec3(.9,.9,.9),.2,pc.SineOut).loop(!0).yoyo(!0).start()},WarningHandler.prototype.update=function(n){};